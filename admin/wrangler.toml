name = "webhook-admin"
main = "src/index.tsx"
compatibility_date = "2025-01-01"
compatibility_flags = ["nodejs_compat"]

[observability]
enabled = true

# Static assets
[site]
bucket = "./dist"

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "test-webhook"
database_id = "4b560545-0e26-4d08-9058-b72cebe26514" # Replace after creating D1 database
migrations_dir = "../migrations"

# KV namespace for Better Auth sessions
# Create with: wrangler kv:namespace create SESSIONS
[[kv_namespaces]]
binding = "SESSIONS"
id = "1d67d3e0047d4f29a42525d2406fde76" # Replace after creating KV namespace

# Environment variables
[vars]
ENVIRONMENT = "development"

# Development environment
[env.dev]
name = "webhook-admin-dev"
vars = { ENVIRONMENT = "development" }

# Production environment
[env.production]
name = "webhook-admin-prod"
vars = { ENVIRONMENT = "production" }

# Secrets (set via .dev.vars and uploaded automatically with npm run secrets:upload)
# - BASE_URL (production URL for Better Auth OAuth callbacks)
# - GOOGLE_CLIENT_ID
# - GOOGLE_CLIENT_SECRET
# - RESEND_API_KEY
# - FROM_EMAIL
# - BETTER_AUTH_SECRET
# - WEBHOOK_WORKER_URL (production webhook ingestion endpoint)
# - ADMIN_EMAIL (email address of the admin user)
